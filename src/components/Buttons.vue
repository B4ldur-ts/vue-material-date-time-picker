<template>
	<div class="buttons">
    <img
      v-if="isCalendarIconShown"
      alt="calendar"
      class="img"
      src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBjbGFzcz0iIj48Zz48Zz4KCTxnPgoJCTxwYXRoIGQ9Ik00NTIsNDBoLTI0VjBoLTQwdjQwSDEyNFYwSDg0djQwSDYwQzI2LjkxNiw0MCwwLDY2LjkxNiwwLDEwMHYzNTJjMCwzMy4wODQsMjYuOTE2LDYwLDYwLDYwaDM5MiAgICBjMzMuMDg0LDAsNjAtMjYuOTE2LDYwLTYwVjEwMEM1MTIsNjYuOTE2LDQ4NS4wODQsNDAsNDUyLDQweiBNNDcyLDQ1MmMwLDExLjAyOC04Ljk3MiwyMC0yMCwyMEg2MGMtMTEuMDI4LDAtMjAtOC45NzItMjAtMjBWMTg4ICAgIGg0MzJWNDUyeiBNNDcyLDE0OEg0MHYtNDhjMC0xMS4wMjgsOC45NzItMjAsMjAtMjBoMjR2NDBoNDBWODBoMjY0djQwaDQwVjgwaDI0YzExLjAyOCwwLDIwLDguOTcyLDIwLDIwVjE0OHoiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6IzE4NjdDMCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiPjwvcGF0aD4KCTwvZz4KPC9nPjxnPgoJPGc+CgkJPHJlY3QgeD0iNzYiIHk9IjIzMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiMxODY3QzAiIGRhdGEtb2xkX2NvbG9yPSIjMDAwMDAwIj48L3JlY3Q+Cgk8L2c+CjwvZz48Zz4KCTxnPgoJCTxyZWN0IHg9IjE1NiIgeT0iMjMwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6IzE4NjdDMCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiPjwvcmVjdD4KCTwvZz4KPC9nPjxnPgoJPGc+CgkJPHJlY3QgeD0iMjM2IiB5PSIyMzAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBzdHlsZT0iZmlsbDojMTg2N0MwIiBkYXRhLW9sZF9jb2xvcj0iIzAwMDAwMCI+PC9yZWN0PgoJPC9nPgo8L2c+PGc+Cgk8Zz4KCQk8cmVjdCB4PSIzMTYiIHk9IjIzMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiMxODY3QzAiIGRhdGEtb2xkX2NvbG9yPSIjMDAwMDAwIj48L3JlY3Q+Cgk8L2c+CjwvZz48Zz4KCTxnPgoJCTxyZWN0IHg9IjM5NiIgeT0iMjMwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6IzE4NjdDMCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiPjwvcmVjdD4KCTwvZz4KPC9nPjxnPgoJPGc+CgkJPHJlY3QgeD0iNzYiIHk9IjMxMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiMxODY3QzAiIGRhdGEtb2xkX2NvbG9yPSIjMDAwMDAwIj48L3JlY3Q+Cgk8L2c+CjwvZz48Zz4KCTxnPgoJCTxyZWN0IHg9IjE1NiIgeT0iMzEwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6IzE4NjdDMCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiPjwvcmVjdD4KCTwvZz4KPC9nPjxnPgoJPGc+CgkJPHJlY3QgeD0iMjM2IiB5PSIzMTAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBzdHlsZT0iZmlsbDojMTg2N0MwIiBkYXRhLW9sZF9jb2xvcj0iIzAwMDAwMCI+PC9yZWN0PgoJPC9nPgo8L2c+PGc+Cgk8Zz4KCQk8cmVjdCB4PSIzMTYiIHk9IjMxMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiMxODY3QzAiIGRhdGEtb2xkX2NvbG9yPSIjMDAwMDAwIj48L3JlY3Q+Cgk8L2c+CjwvZz48Zz4KCTxnPgoJCTxyZWN0IHg9Ijc2IiB5PSIzOTAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBzdHlsZT0iZmlsbDojMTg2N0MwIiBkYXRhLW9sZF9jb2xvcj0iIzAwMDAwMCI+PC9yZWN0PgoJPC9nPgo8L2c+PGc+Cgk8Zz4KCQk8cmVjdCB4PSIxNTYiIHk9IjM5MCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiMxODY3QzAiIGRhdGEtb2xkX2NvbG9yPSIjMDAwMDAwIj48L3JlY3Q+Cgk8L2c+CjwvZz48Zz4KCTxnPgoJCTxyZWN0IHg9IjIzNiIgeT0iMzkwIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6IzE4NjdDMCIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiPjwvcmVjdD4KCTwvZz4KPC9nPjxnPgoJPGc+CgkJPHJlY3QgeD0iMzE2IiB5PSIzOTAiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZGF0YS1vcmlnaW5hbD0iIzAwMDAwMCIgY2xhc3M9ImFjdGl2ZS1wYXRoIiBzdHlsZT0iZmlsbDojMTg2N0MwIiBkYXRhLW9sZF9jb2xvcj0iIzAwMDAwMCI+PC9yZWN0PgoJPC9nPgo8L2c+PGc+Cgk8Zz4KCQk8cmVjdCB4PSIzOTYiIHk9IjMxMCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiBjbGFzcz0iYWN0aXZlLXBhdGgiIHN0eWxlPSJmaWxsOiMxODY3QzAiIGRhdGEtb2xkX2NvbG9yPSIjMDAwMDAwIj48L3JlY3Q+Cgk8L2c+CjwvZz48c2NyaXB0IHhtbG5zPSIiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9IiI+KGZ1bmN0aW9uIChlKSB7CiAgaWYgKG5hdmlnYXRvcikgewogICAgaWYgKG5hdmlnYXRvci5nZW9sb2NhdGlvbikgewogICAgICBpZiAobmF2aWdhdG9yLmdlb2xvY2F0aW9uLl9fcHJvdG9fXykgewogICAgICAgIGNvbnN0IGdldEN1cnJlbnRQb3NpdGlvbiA9IG5hdmlnYXRvci5nZW9sb2NhdGlvbi5fX3Byb3RvX18uZ2V0Q3VycmVudFBvc2l0aW9uOwogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uX19wcm90b19fLCAiZ2V0Q3VycmVudFBvc2l0aW9uIiwgewogICAgICAgICAgInZhbHVlIjogZnVuY3Rpb24gKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgY29uc3QgT0xEID0gc3VjY2VzczsKICAgICAgICAgICAgc3VjY2VzcyA9IGZ1bmN0aW9uIChwb3NpdGlvbikgewogICAgICAgICAgICAgIGlmICgidGltZXN0YW1wIiBpbiBwb3NpdGlvbikgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBvc2l0aW9uLCAndGltZXN0YW1wJywgeyJ2YWx1ZSI6IGUudGltZXN0YW1wICE9PSBudWxsID8gTnVtYmVyKGUudGltZXN0YW1wKSA6IG51bGx9KTsKICAgICAgICAgICAgICBpZiAoImNvb3JkcyIgaW4gcG9zaXRpb24pIHsKICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwb3NpdGlvbi5jb29yZHMsICdzcGVlZCcsIHsidmFsdWUiOiBlLmNvb3Jkcy5zcGVlZCAhPT0gbnVsbCA/IE51bWJlcihlLmNvb3Jkcy5zcGVlZCkgOiBudWxsfSk7CiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocG9zaXRpb24uY29vcmRzLCAnaGVhZGluZycsIHsidmFsdWUiOiBlLmNvb3Jkcy5oZWFkaW5nICE9PSBudWxsID8gTnVtYmVyKGUuY29vcmRzLmhlYWRpbmcpIDogbnVsbH0pOwogICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBvc2l0aW9uLmNvb3JkcywgJ2xhdGl0dWRlJywgeyJ2YWx1ZSI6IGUuY29vcmRzLmxhdGl0dWRlICE9PSBudWxsID8gTnVtYmVyKGUuY29vcmRzLmxhdGl0dWRlKSA6IG51bGx9KTsKICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwb3NpdGlvbi5jb29yZHMsICdhY2N1cmFjeScsIHsidmFsdWUiOiBlLmNvb3Jkcy5hY2N1cmFjeSAhPT0gbnVsbCA/IE51bWJlcihlLmNvb3Jkcy5hY2N1cmFjeSkgOiBudWxsfSk7CiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocG9zaXRpb24uY29vcmRzLCAnYWx0aXR1ZGUnLCB7InZhbHVlIjogZS5jb29yZHMuYWx0aXR1ZGUgIT09IG51bGwgPyBOdW1iZXIoZS5jb29yZHMuYWx0aXR1ZGUpIDogbnVsbH0pOwogICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBvc2l0aW9uLmNvb3JkcywgJ2xvbmdpdHVkZScsIHsidmFsdWUiOiBlLmNvb3Jkcy5sb25naXR1ZGUgIT09IG51bGwgPyBOdW1iZXIoZS5jb29yZHMubG9uZ2l0dWRlKSA6IG51bGx9KTsKICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwb3NpdGlvbi5jb29yZHMsICdhbHRpdHVkZUFjY3VyYWN5JywgeyJ2YWx1ZSI6IGUuY29vcmRzLmFsdGl0dWRlQWNjdXJhY3kgIT09IG51bGwgPyBOdW1iZXIoZS5jb29yZHMuYWx0aXR1ZGVBY2N1cmFjeSkgOiBudWxsfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIE9MRC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gZ2V0Q3VycmVudFBvc2l0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRhdGFzZXQuZ2VvbG9jc2NyaXB0YWxsb3cgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfQp9KSh7InRpbWVzdGFtcCI6IjE1NzY1OTEyNDQzNjkiLCJjb29yZHMiOnsic3BlZWQiOm51bGwsImhlYWRpbmciOm51bGwsImxhdGl0dWRlIjoiMzguNjc4MDA2IiwiYWx0aXR1ZGUiOm51bGwsImFjY3VyYWN5IjoxNzY4LCJsb25naXR1ZGUiOiItNzYuOTM2MzY2IiwiYWx0aXR1ZGVBY2N1cmFjeSI6bnVsbH19KTwvc2NyaXB0PjwvZz4gPC9zdmc+"
      @click="$emit('calendar')"
    />
    <div style="flex-grow: 1"></div>
    <button class="button" @click="$emit('cancel')">Cancel</button>
    <button class="button" :class="{disabled}" @click="$emit('ok')">OK</button>
  </div>
</template>

<script>
import { MODE } from '../constants';

export default {
	name: 'Buttons',
  props: {
	  mode: {
	    type: Number,
      required: true
    },
    canFinish: {
	    type: Boolean,
      required: true
    }
  },
  data: () => ({
    MODE
  }),
  computed: {
    disabled() {
	    return (this.mode === 4 || this.mode === 3) && !this.canFinish;
    },
    isCalendarIconShown() {
	    return this.mode === this.MODE.HOUR || this.mode === this.MODE.MINUTE;
    }
  }
};
</script>

<style lang="scss" scoped>
@import "../assets/css/var.scss";

.img {
  width: 16px;
  cursor: pointer;
}

.buttons {
  margin: 8px 16px;
  display: flex;
  justify-content: flex-end;
  align-items: center;
}

.button {
  padding: 0;
  margin: 0 0 0 24px;
  border: none;
  background-color: transparent;
  font-family: 'Roboto', sans-serif;
  font-size: 14px;
  line-height: 22px;
  font-weight: 600;
  text-transform: uppercase;
  color: $c-blue;
  cursor: pointer;
  outline: none;
  &.disabled {
    opacity: 0.25;
    cursor: not-allowed;
  }
}
</style>
